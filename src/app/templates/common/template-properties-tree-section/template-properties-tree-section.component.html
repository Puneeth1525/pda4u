<div class="button-left-container">
  <button
    mat-button-outline
    [ngClass]="{
      'button-active':
        this.activeFieldDetails.activeFileName === 'Template Properties'
    }"
    class="template-properties leftsingle-btn-active"
    (click)="activeTemplateProperties()"
  >
    <mat-icon matPrefix svgIcon="file"></mat-icon>
    <mat-label class="label-child">Template Properties</mat-label>
  </button>
</div>
<div class="search-left-container">
  <div class="search-container">
    <div class="search-input-container">
      <mat-form-field appearance="outline">
        <mat-icon matPrefix>search</mat-icon>
        <input matInput type="search" placeholder="Search" />
      </mat-form-field>
    </div>
    <div class="allexpand-container">
      <mat-icon svgIcon="expand-all"></mat-icon>
    </div>
  </div>
</div>
<div class="tree-container">
  <mat-tree
    [dataSource]="dataSource"
    [treeControl]="treeControl"
    cdkDropList
    cdkDropListOrientation="vertical"
    (cdkDropListDropped)="drop($event)"
  >
    <mat-nested-tree-node
      *matTreeNodeDef="let node; let index; when: hasChildren"
      [matTreeNodePadding]
      matTreeNodeToggle
    >
      <li class="wrap-tree-container">
        <div
          class="mat-tree-node template-properties-node"
          (click)="onNodeClick(node)"
          matTreeNodeToggle
          [matTreeNodeToggleRecursive]="recursive"
          cdkDragHandleDisabled="!node.isLeafNode"
          cdkDrag
          [cdkDragData]="node"
          [cdkDragDisabled]="!node?.isLeafNode || node.item === 'Button'"
          cdkDragBoundary=".width"
          [ngClass]="{
            'field-btn': node?.isLeafNode,
            'button-active':
              activeFieldDetails.activeFileName === node.item ||
              activeFieldDetails.activeSectionName === node.item,
            'child-active':
              node?.isLeafNode &&
              activeFieldDetails.activeFieldName === node.item &&
              activeFieldDetails.activeSectionName === node.parentNodeText,
            'add-btn': node.item == 'Button'
          }"
        >
          <div class="expand-button-left-group">
            <div class="expand-button">
              <button
                mat-icon-button
                [attr.aria-label]="'toggle ' + node?.filename"
                cdkDragHandle
                (click)="preventMoveIconClick($event, node)"
              >
                <mat-icon
                  class="maticon-container"
                  *ngIf="node?.isLeafNode"
                  svgIcon="Vector"
                ></mat-icon>
                <mat-icon *ngIf="!node?.isLeafNode">
                  {{
                    node.item == "Button"
                      ? "add"
                      : treeControl.isExpanded(node)
                      ? node.item != "File Properties"
                        ? "expand_more"
                        : ""
                      : node.item != "File Properties"
                      ? "chevron_right"
                      : ""
                  }}
                </mat-icon>
              </button>
            </div>
            <div
              class="expand-title"
              [ngClass]="{ 'field-title': node?.isLeafNode }"
            >
              {{ node.item }}
            </div>
          </div>
          <div *ngIf="node?.isLeafNode" class="expand-right-button-group">
            <div class="expand-copy-button" (click)="duplicate(node)">
              <mat-icon svgIcon="copy"></mat-icon>
            </div>
            <div class="expand-delete-button">
              <mat-icon svgIcon="trash" (click)="removeField(node)"></mat-icon>
            </div>
          </div>
        </div>
        <ul class="wrap-tree-nested-node" [ngClass]="{'left-border-none': node.item === 'Header' || node.item === 'Body'}">
          <div *ngIf="treeControl.isExpanded(node)" class="width">
            <ng-container matTreeNodeOutlet></ng-container>
          </div>
        </ul>
      </li>
    </mat-nested-tree-node>
  </mat-tree>
</div>
